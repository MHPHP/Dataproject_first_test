library(tidyverse)
#read data.
cover <- read.csv("../Raw data/alledata-cover.csv")
frekvens <- read.csv("../Raw data/alledata-frekvens.csv")
abiotiske <- read.csv("../Raw data/alledata-abiotiske.csv")
artslist <- read.csv("../Raw data/artsliste.csv")
traits <- read.csv("../Raw data/traits.csv")
cover_taxa <- read.csv("../Raw data/alledata-cover-samletaxa.csv")
frekvens_taxa <- read.csv("../Raw data/alledata-frekvens-samletaxa.csv")
frekvens_cover <- merge(frekvens,cover, by = c("plot","site","year"),suffixes = c("Frekvens","Cover"))
frekvens_cover <- setNames(frekvens_cover,paste0(names(frekvens_cover),ifelse(names(frekvens_cover) %in% setdiff(names(frekvens),names(cover)),"frekvens","")))
frekvens_cover <- setNames(frekvens_cover,paste0(names(frekvens_cover),ifelse(names(frekvens_cover) %in% setdiff(names(cover),names(frekvens)),"cover","")))
df1 <- merge(abiotiske, frekvens_cover, by = c("plot","site","year"))
df1 <- merge(df1, frekvens_taxa, by = c("plot","site","year"))
df1 <- merge(df1, cover_taxa, by = c("plot","site","year"))
data_2014_full <- df1[df1$terhabtype == "{5130}" & df1$year == 2014,]
data_2014 <- data_2014_full[, colSums(data_2014_full != 0) > 0]
data_2014 <- data_2014[, colSums(data_2014 != "mv") > 0]
data_2014$total_obs <- rowSums(data_2014[,grep("Cover", names(data_2014))])
data_2014$shanon_index <- rowSums(-data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs * log(data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs), na.rm = TRUE  )
write.csv(data_2014, file = "Data/Processed data//data_2014_5130.csv")
data <- read.csv("../Data/Processed data/data_2014_5130.csv")
View(data)
library(tidyverse)
library(tidyverse)
grep("Cover",names(data))
data[grep("Cover",names(data))]
count(data[grep("Cover",names(data))])
data[grep("Cover",names(data))]
data[,grep("Cover",names(data))]
data[,grep("Frekvens",names(data))]
plot(data$antalarter, data$total_obs)
library(tidyverse)
data_2014 <-  read.csv("Data/Processed data//data_2014_5130.csv")
library(tidyverse)
data_2014 <-read.csv("../Data/Processed data/data_2014_5130.csv")
data_2014$total_obs <- rowSums(data_2014[,grep("Cover", names(data_2014))])
data_2014$shanon_index <- rowSums(-data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs * log(data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs), na.rm = TRUE  )
write.csv(data_2014, file = "../Data/Processed data//data_2014_5130.csv")
View(data)
rowSums(data[ grep("Frekvens"), data])
rowSums(data[ grep("Frekvens", data)])
rowSums(data[ ,grep("Frekvens", names(data))])
rowSums(data[ ,grep("frekvens", names(data))])
rowSums(data[ ,grep("Frekvens", names(data))])
help(ggplot)
ggplot(data = data) +
geom_point(mapping = aes(data$antalarter, data$total_obs))
help(ggplot)
ggplot(data = data) +
geom_point(mapping = aes(data$antalarter, data$shanon_index, color = data$site))
ggplot(data = data) +
geom_point(mapping = aes(data$antalarter, data$shanon_index, color = data$site, shape = data$site))
ggplot(data = data, mapping = aes(group = data$site)) +
geom_point(mapping = aes(data$antalarter, data$shanon_index, color = data$site, shape = data$site))
ggplot(data = data, mapping = aes(group = data$site)) +
geom_point(mapping = aes(data$antalarter, data$shanon_index, color = data$site))
ggplot(data = data, mapping = aes(group = site)) +
geom_point(mapping = aes(antalarter, shanon_index, color = site))
ggplot(data = data, mapping = aes(x = antalarter, y = shanon_index, group = site)) +
geom_point(mapping = aes( color = site))
ggplot(data = data, mapping = aes(x = antalarter, y = shanon_index, group = site)) +
geom_point(mapping = aes( color = factor(site)))
ggplot(data = data, mapping = aes(x = antalarter, y = shanon_index, group = site)) +
geom_point(mapping = aes( color = factor(site)), size = 2)
ggplot(data = data, mapping = aes(x = antalarter, y = shanon_index, group = site)) +
geom_point(mapping = aes( color = factor(site)), size = 4)
data[grep("X2020Cover", data)]
data[grep("X2020Cover", data)]
data[,grep("X2020Cover", data)]
grep("X2020Cover", data)
data[,55]
data[,grep("X2020Cover", names(data)]
data[,grep("X2020Cover", names(data))]
ggplot(aes( x = data[,grep("X2020Cover", names(data))]/16))
data[,grep("X2020Cover", names(data))]/16
ggplot(aes( x = data[,grep("X2020Cover", names(data))]/16)) +
geom_histogram()
ggplot(aes( x = list(data[,grep("X2020Cover", names(data))]/16))) +
geom_histogram()
ggplot(mapping =  aes( x = data[,grep("X2020Cover", names(data))]/16)) +
geom_histogram()
install.packages("fitdistrplus v1.1-3")
install.packages(fitdistrplus)
install.packages("fitdistrplus")
install.packages("Rtools")
library(fitdistrplus)
fitdist(data[,grep("X2020Cover", names(data))]/16, "beta")
fitdist(list(data[,grep("X2020Cover", names(data))]/16), "beta")
list(data[,grep("X2020Cover", names(data))]/16)
data[,grep("X2020Cover", names(data))]/16
c(data[,grep("X2020Cover", names(data))]/16)
fitdist(c(data[,grep("X2020Cover", names(data))]/16), "beta")
install.packages("MASS")
install.packages("MASS")
library(MASS)
fitdistr(list(data[,grep("X2020Cover", names(data))]/16), "beta")
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta")
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta")
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta", list(shape1=1,shape2=1))
fitdistr(c(data[,grep("X2020Cover", names(data))]/17), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))]+1)/18), "beta", list(shape1=1,shape2=1))
(data[,grep("X2020Cover", names(data))]+1)/18)
(data[,grep("X2020Cover", names(data))]+1)/18
fitdistr(c((data[,grep("X2020Cover", names(data))]+0.01)/16.1), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))])/16.1), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))]+0.1)/16), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))]+0.1)/16+0.1), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))]+0.001)/16+0.01), "beta", list(shape1=1,shape2=1))
fitdistr(c((data[,grep("X2020Cover", names(data))])/16), "beta", list(shape1=1,shape2=1))
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta", list(shape1=1,shape2=1))
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta-binomial", list(shape1=1,shape2=1))
install.packages(vgam)
install.packages(VGAM)
install.packages("VGAM")
library(VGAM)
library(tidyverse)
library(ggmap)
install.packages("ggmap")
library(ggmap)
ggmap(get_map(location = "Denmark"))
ggmap(get_map(location = "Denmark"), source = "osm")
ggmap(get_map(location = "Denmark"), source = "osm")
ggmap(get_map(location = "Denmark"), source = "stamen")
ggmap(get_map(location = "Denmark"), source = "stamen")
ggmap(get_map(location = "Denmark"), source = "stamen")
ggmap(get_map(location = "Denmark"), source = "stamen")
install.packages("tmaptools")
library(tmaptools)
ggmap(get_stamenmap(rbind(as.numeric(paste(geocode_OSM("Vienna")$bbox))), zoom = 11))
ggmap(get_stamenmap(location = "Denmark"), source = "stamen")
ggmap(get_stamenmap(location = "Denmark"))
ggmap(get_stamenmap(bbox = c(right = 10, left = 8, top = 58, bottom = 52)))
ggmap(get_stamenmap(rbind(as.numeric(paste(geocode_OSM("Herning")$bbox))), zoom = 11))
ggmap(get_stamenmap(rbind(as.numeric(paste(geocode_OSM("Herning")$bbox))), zoom = 10))
ggmap(get_stamenmap(rbind(as.numeric(paste(geocode_OSM("Herning")$bbox))), zoom = 15))
ggmap(get_stamenmap(bbox = c(right = 12, left = 8, top = 58, bottom = 54)))
fitdistr(c(data[,grep("X2020Cover", names(data))]/16), "beta-binomial", list(shape1=1,shape2=1))
fitdistr(c(data[,grep("X2020Cover", names(data))]+1/16+2), "beta-binomial", list(shape1=1,shape2=1))
library(tidyverse)
library(fitdistrplus)
library(MASS)
library(VGAM)
data <- read.csv("../Data/Processed data/data_2014_5130.csv")
fitdistr(c(data[,grep("X2020Cover", names(data))]+1/16+2), "beta-binomial", list(shape1=1,shape2=1))
fitdistr(c(data[,grep("X2020Cover", names(data))]+1/16+2), "beta", list(shape1=1,shape2=1))
cover_taxa <- read.csv("../Raw data/alledata-cover-samletaxa.csv")
cover_taxa <- read.csv("../../Raw data/alledata-cover-samletaxa.csv")
View(cover_taxa)
taxa1 <- cover_taxa[cover_taxa$terhabtype == "{5130}" & cover_taxa$year == 2014,]
View(taxa1)
View(cover_taxa)
taxa1 <- cover_taxa[cover_taxa$plot == 716696 & cover_taxa$year == 2014,]
View(taxa1)
taxa1 <- cover_taxa[cover_taxa$site == c(5203) & cover_taxa$year == 2014,]
View(taxa1)
View(data)
View(taxa1)
```{r}
library(tidyverse)
```
Read the data
```{r}
data_2014 <-read.csv("../Data/Processed data/data_2014_5130.csv")
```
Get total observations in Cover
```{r}
data_2014$total_obs <- rowSums(data_2014[,grep("Cover", names(data_2014))])
```
Calculate shanon index from cover data
```{r}
data_2014$shanon_index <- rowSums(-data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs * log(data_2014[, grep("Cover", names(data_2014))]/data_2014$total_obs), na.rm = TRUE  )
```
View(data_2014)
View(data_2014)
write.csv(data_5130_full, file = "../Data/Processed data//data_5130.csv")
library(tidyverse)
#read data.
cover <- read.csv("../Raw data/alledata-cover.csv")
library(tidyverse)
#read data.
cover <- read.csv("../../Raw data/alledata-cover.csv")
frekvens <- read.csv("../../Raw data/alledata-frekvens.csv")
abiotiske <- read.csv("../../Raw data/alledata-abiotiske.csv")
artslist <- read.csv("../../Raw data/artsliste.csv")
traits <- read.csv("../../Raw data/traits.csv")
cover_taxa <- read.csv("../../Raw data/alledata-cover-samletaxa.csv")
frekvens_taxa <- read.csv("../../Raw data/alledata-frekvens-samletaxa.csv")
frekvens_cover <- merge(frekvens,cover, by = c("plot","site","year"),suffixes = c("Frekvens","Cover"))
frekvens_cover <- setNames(frekvens_cover,paste0(names(frekvens_cover),ifelse(names(frekvens_cover) %in% setdiff(names(frekvens),names(cover)),"frekvens","")))
frekvens_cover <- setNames(frekvens_cover,paste0(names(frekvens_cover),ifelse(names(frekvens_cover) %in% setdiff(names(cover),names(frekvens)),"cover","")))
df1 <- merge(abiotiske, frekvens_cover, by = c("plot","site","year"))
df1 <- merge(df1, frekvens_taxa, by = c("plot","site","year"))
df1 <- merge(df1, cover_taxa, by = c("plot","site","year"))
data_2014_full <- df1[df1$terhabtype == "{5130}" & df1$year == 2014,]
taxa1 <- cover_taxa[cover_taxa$site == c(5203) & cover_taxa$year == 2014,]
data_2014 <- data_2014_full[, colSums(data_2014_full != 0) > 0]
data_2014 <- data_2014[, colSums(data_2014 != "mv") > 0]
data_5130_full <- df1[df1$terhabtype == "{5130}",]
write.csv(data_5130_full, file = "../Data/Processed data//data_5130.csv")
data_5130_full <- df1[df1$terhabtype == "{5130}",]
data_5130 <- data_2014_full[, colSums(data_5130_full != 0) > 0]
data_5130 <- data_2014[, colSums(data_5130 != "mv") > 0]
data_5130_full <- df1[df1$terhabtype == "{5130}",]
data_5130 <- data_5130_full[, colSums(data_5130_full != 0) > 0]
data_5130 <- data_5130[, colSums(data_5130 != "mv") > 0]
write.csv(data_5130, file = "../Data/Processed data//data_5130.csv")
data_2014 <-read.csv("../Data/Processed data/data_2014_5130.csv")
data_5130 <-read.csv("../Data/Processed data/data_5130.csv")
